<div class="highlight" id="highlight-{{ highlight.id }}">
    <div class="highlight-text">{{ highlight.text }}</div>
    {% if highlight.source %}
        <div class="highlight-source">Source: {{ highlight.source }}</div>
    {% endif %}
    {% if highlight.author %}
        <div class="highlight-source">Author: {{ highlight.author }}</div>
    {% endif %}
    {% if highlight.note %}
        <div class="highlight-source">Note: {{ highlight.note }}</div>
    {% endif %}
    <div class="highlight-actions">
        {% if not highlight.is_discarded %}
        <button 
            class="btn-favorite {% if highlight.favorite or highlight.is_favorited %}active{% endif %}"
            hx-post="/highlights/{{ highlight.id }}/favorite"
            hx-vals='{"favorite": "{{ "false" if (highlight.favorite or highlight.is_favorited) else "true" }}"}'
            hx-target="#highlight-{{ highlight.id }}"
            hx-swap="outerHTML">
            {% if highlight.favorite or highlight.is_favorited %}★ Favorited{% else %}☆ Favorite{% endif %}
        </button>
        {% endif %}
        {% if not highlight.is_discarded %}
        <button 
            class="btn-edit"
            hx-get="/highlights/{{ highlight.id }}/edit"
            hx-target="#highlight-{{ highlight.id }}"
            hx-swap="outerHTML">
            ✎ Edit
        </button>
        {% endif %}
        {% if not (highlight.favorite or highlight.is_favorited) %}
        <button 
            class="btn-discard"
            hx-post="/highlights/{{ highlight.id }}/discard"
            hx-target="#highlight-{{ highlight.id }}"
            hx-swap="outerHTML"
            hx-confirm="Are you sure you want to discard this highlight?">
            ✕ Discard
        </button>
        {% endif %}
    </div>
</div>
</div>
