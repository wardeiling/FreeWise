{% extends "base.html" %}

{% block title %}Import Highlights - FreeWise{% endblock %}

{% block heading %}Import from Readwise{% endblock %}

{% block content %}
{% if success_message %}
<div class="success-message" style="padding: 15px; border-radius: 4px; margin-bottom: 20px;">
    <strong>‚úì Import Successful!</strong><br>
    {{ success_message }}
    <div style="margin-top: 15px;">
        <a href="/highlights/ui/review" style="margin-right: 15px;">‚Üí Review Highlights</a>
        <a href="/import/ui">Import Another File</a>
    </div>
</div>
{% endif %}

<div style="max-width: 600px;">
    <p style="margin-bottom: 20px;">
        Upload a Readwise CSV export file to import your highlights into FreeWise.
    </p>
    
    <div style="background: var(--highlight-bg); padding: 15px; border-radius: 8px; border: 1px solid var(--border-color); margin-bottom: 20px;">
        <h3 style="margin-top: 0; font-size: 1em;">How to export from Readwise:</h3>
        <ol style="margin: 10px 0; padding-left: 20px; line-height: 1.8;">
            <li>Log in to <a href="https://readwise.io" target="_blank">readwise.io</a></li>
            <li>Go to Settings ‚Üí Export</li>
            <li>Click "Export all data"</li>
            <li>Download the CSV file</li>
            <li>Upload it here</li>
        </ol>
    </div>

    <form method="post" action="/import/ui" enctype="multipart/form-data" style="margin-top: 30px;">
        <div style="margin-bottom: 20px;">
            <label for="file" style="display: block; margin-bottom: 10px; font-weight: bold;">
                Select CSV File
            </label>
            <input 
                type="file" 
                id="file" 
                name="file" 
                accept=".csv"
                required
                style="width: 100%; padding: 10px; border: 2px dashed var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color); cursor: pointer;">
        </div>

        <div style="padding: 15px; background: var(--highlight-bg); border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 20px;">
            <p style="margin: 0; font-size: 0.9em;">
                <strong>Note:</strong> The CSV should have these columns:
            </p>
            <ul style="margin: 10px 0 0 0; padding-left: 20px; font-size: 0.85em; color: var(--muted-text);">
                <li><strong>Highlight</strong> (required) - The highlighted text</li>
                <li>Book Title - Stored as source</li>
                <li>Book Author - Stored separately</li>
                <li>Note - Additional annotations</li>
                <li>Tags - Comma-separated tags</li>
                <li>Highlighted at - When the highlight was created</li>
            </ul>
        </div>

        <div style="margin-top: 30px;">
            <button type="submit" style="background: #007bff; color: white; padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 1em;">
                üì• Import Highlights
            </button>
            <a href="/" style="margin-left: 15px;">
                Cancel
            </a>
        </div>
    </form>
</div>

<div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border-color);">
    <a href="/">‚Üê Back to Home</a>
</div>
{% endblock %}
